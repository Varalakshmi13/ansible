#in ansible we print using debug
#ansible-playbook -i inv -u centos -k 01-sample.yml
#-k is to ask password
#in output we have rescue --> one task is failure, we want to handle that
#ignored - if task is failure, if we want to ignore it


#ansible:
#ansible -i inventory-sample all --list-hosts
#ansible -i inventory-sample CATALOGUE --list-hosts
#ansible -i inventory-sample dev --list-hosts
#ansible -i inventory-sample  -i /tmp/1 all --list-hosts
#ansible -i host1,host2 all --list-hosts
#ansible -i localhost, all --list-hosts

#ansible -i inv all -m ping
#ansible -i inv all -u centos -k -m ping
#ansible -i inv all -u centos -k -b -m yum -a name=nginx
#ansible -i inv all -u centos -k -b -m systemd -a "name=nginx state=started"

Ansible roles structure :
# playbooks
site.yml
webservers.yml
fooservers.yml
roles/
    common/
        tasks/
        handlers/
        library/
        files/
        templates/
        vars/
        defaults/
        meta/
    webservers/
        tasks/
        defaults/
        meta/

jenkins instance :
install git plugin and clone ansible git repo
change branch from master to main
Build with parameters : string :
give shell command:

ansible-playbook -i inv  roboshop.yml
-e ansible_user=centos
-e ansible_password=DevOps321
-e role_name=${COMPONENT} -e
HOST=$(echo $COMPONENT | tr [a-z] [A-Z])
--ssh-extra-args="-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null"


COMPONENTS: comes from parameter in jenkins
role_name and HOST (inventory its caps) in roboshop.yml playbook



Host key checking issue :

in work station its alrerady configures --> cd .ssh/config --> we have host key checking is no
in jenkins server --> sudo su -  --> grep jenkins /etc/passwd  (ect/passwd tells wich is the home directory)
cd /var/lib/jenkins -->  cd .ssh --> vi config --> copy same config as in workstation /ssh/config

or leave this and try to give ssh options command line to ansible
StrictHostKeyChecking=no UserKnownHostsFile=/dev/null  --> these two we can find in workstation .ssh/config
StrictHostKeyChecking=no --> it never checks for Yes or No
 serKnownHostsFile=/dev/null -->never store host key
why we need above 2 options --> it all started with security concern




